{"version":3,"file":"unit.js","sources":["../../src/core/streams/stream_actions.ts","../../src/util.ts","../../src/elements/stream_element.ts","../../src/tests/helpers/intern_test_case.ts","../../src/tests/helpers/dom_test_case.ts","../../src/tests/unit/stream_element_tests.ts"],"sourcesContent":["import { StreamElement } from \"../../elements/stream_element\"\n\nexport const StreamActions: { [action: string]: (this: StreamElement) => void } = {\n  append() {\n    this.targetElement?.append(this.templateContent)\n  },\n\n  prepend() {\n    this.targetElement?.prepend(this.templateContent)\n  },\n\n  remove() {\n    this.targetElement?.remove()\n  },\n\n  replace() {\n    this.targetElement?.replaceWith(this.templateContent)\n  },\n\n  update() {\n    if (this.targetElement) {\n      this.targetElement.innerHTML = \"\"\n      this.targetElement.append(this.templateContent)\n    }\n  }\n}\n","export function defer(callback: () => any) {\n  setTimeout(callback, 1)\n}\n\nexport type DispatchOptions = { target: EventTarget, cancelable: boolean, detail: any }\n\nexport function dispatch(eventName: string, { target, cancelable, detail }: Partial<DispatchOptions> = {}) {\n  const event = new CustomEvent(eventName, { cancelable, bubbles: true, detail })\n  void (target || document.documentElement).dispatchEvent(event)\n  return event\n}\n\nexport function nextAnimationFrame() {\n  return new Promise<void>(resolve => requestAnimationFrame(() => resolve()))\n}\n\nexport function unindent(strings: TemplateStringsArray, ...values: any[]): string {\n  const lines = trimLeft(interpolate(strings, values)).split(\"\\n\")\n  const match = lines[0].match(/^\\s+/)\n  const indent = match ? match[0].length : 0\n  return lines.map(line => line.slice(indent)).join(\"\\n\")\n}\n\nfunction trimLeft(string: string) {\n  return string.replace(/^\\n/, \"\")\n}\n\nfunction interpolate(strings: TemplateStringsArray, values: any[]) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i]\n    return result + string + value\n  }, \"\")\n}\n\nexport function uuid() {\n  return Array.apply(null, { length: 36 } as any).map((_, i) => {\n    if (i == 8 || i == 13 || i == 18 || i == 23) {\n      return \"-\"\n    } else if (i == 14) {\n      return \"4\"\n    } else if (i == 19) {\n      return (Math.floor(Math.random() * 4) + 8).toString(16)\n    } else {\n      return Math.floor(Math.random() * 15).toString(16)\n    }\n  }).join(\"\")\n}\n","import { StreamActions } from \"../core/streams/stream_actions\"\nimport { nextAnimationFrame } from \"../util\"\n\n// <turbo-stream action=replace target=id><template>...\n\nexport class StreamElement extends HTMLElement {\n  async connectedCallback() {\n    try {\n      await this.render()\n    } catch (error) {\n      console.error(error)\n    } finally {\n      this.disconnect()\n    }\n  }\n\n  private renderPromise?: Promise<void>\n\n  async render() {\n    return this.renderPromise ??= (async () => {\n      if (this.dispatchEvent(this.beforeRenderEvent)) {\n        await nextAnimationFrame()\n        this.performAction()\n      }\n    })()\n  }\n\n  disconnect() {\n    try { this.remove() } catch {}\n  }\n\n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action]\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.raise(\"unknown action\")\n    }\n    this.raise(\"action attribute is missing\")\n  }\n\n  get targetElement() {\n    if (this.target) {\n      return this.ownerDocument?.getElementById(this.target)\n    }\n    this.raise(\"target attribute is missing\")\n  }\n\n  get templateContent() {\n    return this.templateElement.content\n  }\n\n  get templateElement() {\n    if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.raise(\"first child element must be a <template> element\")\n  }\n\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  private raise(message: string): never {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  private get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  private get beforeRenderEvent() {\n    return new CustomEvent(\"turbo:before-stream-render\", { bubbles: true, cancelable: true })\n  }\n}\n\ncustomElements.define(\"turbo-stream\", StreamElement)\n","import intern from \"intern\"\nimport Test from \"intern/lib/Test\"\nimport { Tests } from \"intern/lib/interfaces/object\"\n\nexport class InternTestCase {\n  readonly internTest: Test\n\n  static registerSuite() {\n    return intern.getInterface(\"object\").registerSuite(this.name, { tests: this.tests })\n  }\n\n  static get tests(): Tests {\n    return this.testNames.reduce((tests, testName): Tests => {\n      return { ...tests, [testName]: internTest => this.runTest(internTest) }\n    }, {} as Tests)\n  }\n\n  static get testNames(): string[] {\n    return this.testKeys.map(key => key.slice(5))\n  }\n\n  static get testKeys(): string[] {\n    return Object.getOwnPropertyNames(this.prototype).filter(key => key.match(/^test /))\n  }\n\n  static runTest(internTest: Test): Promise<void> {\n    const testCase = new this(internTest)\n    return testCase.runTest()\n  }\n\n  constructor(internTest: Test) {\n    this.internTest = internTest\n  }\n\n  get testName() {\n    return this.internTest.name\n  }\n\n  async runTest() {\n    try {\n      await this.setup()\n      await this.beforeTest()\n      await this.test()\n      await this.afterTest()\n    } finally {\n      await this.teardown()\n    }\n  }\n\n  get assert() {\n    return intern.getPlugin(\"chai\").assert\n  }\n\n  async setup() {\n\n  }\n\n  async beforeTest() {\n\n  }\n\n  get test(): () => Promise<void> {\n    const method = (this as any)[`test ${this.testName}`]\n    if (method != null && typeof method == \"function\") {\n      return method\n    } else {\n      throw new Error(`No such test \"${this.testName}\"`)\n    }\n  }\n\n  async afterTest() {\n\n  }\n\n  async teardown() {\n\n  }\n}\n","import { InternTestCase } from \"./intern_test_case\"\n\nexport class DOMTestCase extends InternTestCase {\n  fixtureElement = document.createElement(\"main\")\n\n  async setup() {\n    this.fixtureElement.hidden = true\n    document.body.insertAdjacentElement(\"afterbegin\", this.fixtureElement)\n  }\n\n  async teardown() {\n    this.fixtureElement.innerHTML = \"\"\n    this.fixtureElement.remove()\n  }\n\n  append(node: Node) {\n    this.fixtureElement.appendChild(node)\n  }\n\n  find(selector: string) {\n    return this.fixtureElement.querySelector(selector)\n  }\n\n  get fixtureHTML() {\n    return this.fixtureElement.innerHTML\n  }\n\n  set fixtureHTML(html: string) {\n    this.fixtureElement.innerHTML = html\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\nimport { nextAnimationFrame } from \"../../util\"\nimport { DOMTestCase } from \"../helpers/dom_test_case\"\n\nexport class StreamElementTests extends DOMTestCase {\n  async beforeTest() {\n    this.fixtureHTML = `<div id=\"hello\">Hello Turbo</div>`\n  }\n\n  async \"test action=append\"() {\n    const element = createStreamElement(\"append\", \"hello\", createTemplateElement(\" Streams\"))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo Streams\")\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=prepend\"() {\n    const element = createStreamElement(\"prepend\", \"hello\", createTemplateElement(\"Streams \"))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Streams Hello Turbo\")\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=remove\"() {\n    const element = createStreamElement(\"remove\", \"hello\")\n    this.assert.ok(this.find(\"#hello\"))\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.notOk(this.find(\"#hello\"))\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=replace\"() {\n    const element = createStreamElement(\"replace\", \"hello\", createTemplateElement(`<h1 id=\"hello\">Hello Turbo</h1>`))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n    this.assert.ok(this.find(\"div#hello\"))\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n    this.assert.notOk(this.find(\"div#hello\"))\n    this.assert.ok(this.find(\"h1#hello\"))\n    this.assert.isNull(element.parentElement)\n  }\n\n  async \"test action=update\"() {\n    const element = createStreamElement(\"update\", \"hello\", createTemplateElement(\"Goodbye Turbo\"))\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Hello Turbo\")\n\n    this.append(element)\n    await nextAnimationFrame()\n\n    this.assert.equal(this.find(\"#hello\")?.textContent, \"Goodbye Turbo\")\n    this.assert.isNull(element.parentElement)\n  }\n}\n\nfunction createStreamElement(action: string | null, target: string | null, templateElement?: HTMLTemplateElement) {\n  const element = new StreamElement()\n  if (action) element.setAttribute(\"action\", action)\n  if (target) element.setAttribute(\"target\", target)\n  if (templateElement) element.appendChild(templateElement)\n  return element\n}\n\nfunction createTemplateElement(html: string) {\n  const element = document.createElement(\"template\")\n  element.innerHTML = html\n  return element\n}\n\nStreamElementTests.registerSuite()\n"],"names":["intern"],"mappings":"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"}