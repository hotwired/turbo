{"version":3,"file":"turbo.js","sources":["../src/polyfills/custom-elements-native-shim.ts","../src/util.ts","../src/progress_bar.ts","../src/location.ts","../src/fetch_response.ts","../src/fetch_request.ts","../src/head_details.ts","../src/snapshot.ts","../src/visit.ts","../src/browser_adapter.ts","../src/form_submit_observer.ts","../src/form_interceptor.ts","../src/form_submission.ts","../src/link_interceptor.ts","../src/frame_controller.ts","../src/elements/frame_element.ts","../src/frame_redirector.ts","../src/history.ts","../src/link_click_observer.ts","../src/navigator.ts","../src/page_observer.ts","../src/scroll_observer.ts","../src/stream_message.ts","../src/stream_observer.ts","../src/types.ts","../src/renderer.ts","../src/error_renderer.ts","../src/snapshot_cache.ts","../src/snapshot_renderer.ts","../src/view.ts","../src/controller.ts","../src/stream_actions.ts","../src/elements/stream_element.ts","../src/index.ts","../src/script_warning.ts","../src/umd.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function() {\n  if (\n      // No Reflect, no classes, no need for shim because native custom elements\n      // require ES2015 classes or Reflect.\n      window.Reflect === undefined || window.customElements === undefined ||\n      // The webcomponentsjs custom elements polyfill doesn't require\n      // ES2015-compatible construction (`super()` or `Reflect.construct`).\n      (window.customElements as any).polyfillWrapFlushCallback) {\n    return;\n  }\n  const BuiltInHTMLElement = HTMLElement;\n\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    'HTMLElement': function HTMLElement(this: HTMLElement) {\n      return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n    }\n  };\n  window.HTMLElement =\n      wrapperForTheName['HTMLElement'] as unknown as typeof HTMLElement;\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n  })();\n","export function array<T>(values: ArrayLike<T>): T[] {\n  return Array.prototype.slice.call(values)\n}\n\nexport const closest = (() => {\n  const html = document.documentElement\n\n  type MatchesSelector = (this: Element, selector: string) => boolean\n  const match: MatchesSelector = html.matches\n    || (html as any).webkitMatchesSelector\n    || (html as any).msMatchesSelector\n    || (html as any).mozMatchesSelector\n\n  type Closest = (this: Element, selector: string) => Element | null\n  const closest: Closest = html.closest || function(selector: string) {\n    let element: Element | null = this\n    while (element) {\n      if (match.call(element, selector)) {\n        return element\n      } else {\n        element = element.parentElement\n      }\n    }\n  }\n\n  return function(element: Element, selector: string) {\n    return closest.call(element, selector)\n  }\n})()\n\nexport function defer(callback: () => any) {\n  setTimeout(callback, 1)\n}\n\nexport type DispatchOptions = { target: EventTarget, cancelable: boolean, data: any }\n\nexport function dispatch(eventName: string, { target, cancelable, data }: Partial<DispatchOptions> = {}) {\n  const event = document.createEvent(\"Events\") as Event & { data: any }\n  event.initEvent(eventName, true, cancelable == true)\n  event.data = data || {}\n\n  // Fix setting `defaultPrevented` when `preventDefault()` is called\n  // http://stackoverflow.com/questions/23349191/event-preventdefault-is-not-working-in-ie-11-for-custom-events\n  if (event.cancelable && !preventDefaultSupported) {\n    const { preventDefault } = event\n    event.preventDefault = function() {\n      if (!this.defaultPrevented) {\n        Object.defineProperty(this, \"defaultPrevented\", { get: () => true })\n      }\n      preventDefault.call(this)\n    }\n  }\n\n  (target || document).dispatchEvent(event)\n  return event\n}\n\nexport function nextAnimationFrame() {\n  return new Promise<void>(resolve => requestAnimationFrame(() => resolve()))\n}\n\nconst preventDefaultSupported = (() => {\n  const event = document.createEvent(\"Events\")\n  event.initEvent(\"test\", true, true)\n  event.preventDefault()\n  return event.defaultPrevented\n})()\n\nexport function unindent(strings: TemplateStringsArray, ...values: any[]): string {\n  const lines = trimLeft(interpolate(strings, values)).split(\"\\n\")\n  const match = lines[0].match(/^\\s+/)\n  const indent = match ? match[0].length : 0\n  return lines.map(line => line.slice(indent)).join(\"\\n\")\n}\n\nfunction trimLeft(string: string) {\n  return string.replace(/^\\n/, \"\")\n}\n\nfunction interpolate(strings: TemplateStringsArray, values: any[]) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i]\n    return result + string + value\n  }, \"\")\n}\n\nexport function uuid() {\n  return Array.apply(null, { length: 36 } as any).map((_, i) => {\n    if (i == 8 || i == 13 || i == 18 || i == 23) {\n      return \"-\"\n    } else if (i == 14) {\n      return \"4\"\n    } else if (i == 19) {\n      return (Math.floor(Math.random() * 4) + 8).toString(16)\n    } else {\n      return Math.floor(Math.random() * 15).toString(16)\n    }\n  }).join(\"\")\n}\n","import { unindent } from \"./util\"\n\nexport class ProgressBar {\n  static animationDuration = 300/*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 9999;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  readonly stylesheetElement: HTMLStyleElement\n  readonly progressElement: HTMLDivElement\n\n  hiding = false\n  trickleInterval?: number\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement()\n    this.progressElement = this.createProgressElement()\n    this.installStylesheetElement()\n    this.setValue(0)\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true\n      this.installProgressElement()\n      this.startTrickling()\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement()\n        this.stopTrickling()\n        this.visible = false\n        this.hiding = false\n      })\n    }\n  }\n\n  setValue(value: number) {\n    this.value = value\n    this.refresh()\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild)\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\"\n    this.progressElement.style.opacity = \"1\"\n    document.documentElement.insertBefore(this.progressElement, document.body)\n    this.refresh()\n  }\n\n  fadeProgressElement(callback: () => void) {\n    this.progressElement.style.opacity = \"0\"\n    setTimeout(callback, ProgressBar.animationDuration * 1.5)\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement)\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration)\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval)\n    delete this.trickleInterval\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100)\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + (this.value * 90)}%`\n    })\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\")\n    element.type = \"text/css\"\n    element.textContent = ProgressBar.defaultCSS\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\")\n    element.className = \"turbo-progress-bar\"\n    return element\n  }\n}\n","export type Locatable = Location | string\n\nexport class Location {\n  static get currentLocation() {\n    return this.wrap(window.location.toString())\n  }\n\n  static wrap(locatable: Locatable): Location\n  static wrap(locatable?: Locatable | null): Location | undefined\n  static wrap(locatable: Locatable) {\n    if (typeof locatable == \"string\") {\n      return new this(locatable)\n    } else if (locatable != null) {\n      return locatable\n    }\n  }\n\n  readonly absoluteURL: string\n  readonly requestURL: string\n  readonly anchor?: string\n\n  constructor(url: string) {\n    const linkWithAnchor = document.createElement(\"a\")\n    linkWithAnchor.href = url\n\n    this.absoluteURL = linkWithAnchor.href\n\n    const anchorLength = linkWithAnchor.hash.length\n    if (anchorLength < 2) {\n      this.requestURL = this.absoluteURL\n    } else {\n      this.requestURL = this.absoluteURL.slice(0, -anchorLength)\n      this.anchor = linkWithAnchor.hash.slice(1)\n    }\n  }\n\n  getOrigin() {\n    return this.absoluteURL.split(\"/\", 3).join(\"/\")\n  }\n\n  getPath() {\n    return (this.requestURL.match(/\\/\\/[^/]*(\\/[^?;]*)/) || [])[1] || \"/\"\n  }\n\n  getPathComponents() {\n    return this.getPath().split(\"/\").slice(1)\n  }\n\n  getLastPathComponent() {\n    return this.getPathComponents().slice(-1)[0]\n  }\n\n  getExtension() {\n    return (this.getLastPathComponent().match(/\\.[^.]*$/) || [])[0] || \"\"\n  }\n\n  isHTML() {\n    return !!this.getExtension().match(/^(?:|\\.(?:htm|html|xhtml))$/)\n  }\n\n  isPrefixedBy(location: Location): boolean {\n    const prefixURL = getPrefixURL(location)\n    return this.isEqualTo(location) || stringStartsWith(this.absoluteURL, prefixURL)\n  }\n\n  isEqualTo(location?: Location) {\n    return location && this.absoluteURL === location.absoluteURL\n  }\n\n  toCacheKey() {\n    return this.requestURL\n  }\n\n  toJSON() {\n    return this.absoluteURL\n  }\n\n  toString() {\n    return this.absoluteURL\n  }\n\n  valueOf() {\n    return this.absoluteURL\n  }\n}\n\nfunction getPrefixURL(location: Location) {\n  return addTrailingSlash(location.getOrigin() + location.getPath())\n}\n\nfunction addTrailingSlash(url: string) {\n  return stringEndsWith(url, \"/\") ? url : url + \"/\"\n}\n\nfunction stringStartsWith(string: string, prefix: string) {\n  return string.slice(0, prefix.length) === prefix\n}\n\nfunction stringEndsWith(string: string, suffix: string) {\n  return string.slice(-suffix.length) === suffix\n}\n","import { Location } from \"./location\"\n\nexport class FetchResponse {\n  readonly response: Response\n\n  constructor(response: Response) {\n    this.response = response\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location() {\n    return Location.wrap(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^text\\/html|^application\\/xhtml\\+xml/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText(): Promise<string> {\n    return this.response.text()\n  }\n\n  get responseHTML(): Promise<string | undefined> {\n    if (this.isHTML) {\n      return this.response.text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name: string) {\n    return this.response.headers.get(name)\n  }\n}\n","import { FetchResponse } from \"./fetch_response\"\nimport { Location } from \"./location\"\nimport { dispatch } from \"./util\"\n\nexport interface FetchRequestDelegate {\n  additionalHeadersForRequest?(request: FetchRequest): { [header: string]: string }\n  requestStarted(request: FetchRequest): void\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse): void\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestErrored(request: FetchRequest, error: Error): void\n  requestFinished(request: FetchRequest): void\n}\n\nexport enum FetchMethod {\n  get,\n  post,\n  put,\n  patch,\n  delete\n}\n\nexport function fetchMethodFromString(method: string) {\n  switch (method.toLowerCase()) {\n    case \"get\":    return FetchMethod.get\n    case \"post\":   return FetchMethod.post\n    case \"put\":    return FetchMethod.put\n    case \"patch\":  return FetchMethod.patch\n    case \"delete\": return FetchMethod.delete\n  }\n}\n\nexport type FetchRequestBody = FormData\n\nexport type FetchRequestHeaders = { [header: string]: string }\n\nexport interface FetchRequestOptions {\n  headers: FetchRequestHeaders\n  body: FetchRequestBody\n  followRedirects: boolean\n}\n\nexport class FetchRequest {\n  readonly delegate: FetchRequestDelegate\n  readonly method: FetchMethod\n  readonly location: Location\n  readonly body?: FetchRequestBody\n  readonly abortController = new AbortController\n\n  constructor(delegate: FetchRequestDelegate, method: FetchMethod, location: Location, body?: FetchRequestBody) {\n    this.delegate = delegate\n    this.method = method\n    this.location = location\n    this.body = body\n  }\n\n  get url() {\n    const url = this.location.absoluteURL\n    const query = this.params.toString()\n    if (this.isIdempotent && query.length) {\n      return [url, query].join(url.includes(\"?\") ? \"&\" : \"?\")\n    } else {\n      return url\n    }\n  }\n\n  get params() {\n    return this.entries.reduce((params, [name, value]) => {\n      params.append(name, value.toString())\n      return params\n    }, new URLSearchParams)\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort()\n  }\n\n  async perform(): Promise<FetchResponse> {\n    const { fetchOptions } = this\n    dispatch(\"turbo:before-fetch-request\", { data: { fetchOptions } })\n    try {\n      this.delegate.requestStarted(this)\n      const response = await fetch(this.url, fetchOptions)\n      return await this.receive(response)\n    } catch (error) {\n      this.delegate.requestErrored(this, error)\n      throw error\n    } finally {\n      this.delegate.requestFinished(this)\n    }\n  }\n\n  async receive(response: Response): Promise<FetchResponse> {\n    const fetchResponse = new FetchResponse(response)\n    const event = dispatch(\"turbo:before-fetch-response\", { cancelable: true, data: { fetchResponse } })\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse)\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse)\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse)\n    }\n    return fetchResponse\n  }\n\n  get fetchOptions(): RequestInit {\n    return {\n      method: FetchMethod[this.method].toUpperCase(),\n      credentials: \"same-origin\",\n      headers: this.headers,\n      redirect: \"follow\",\n      body: this.isIdempotent ? undefined : this.body,\n      signal: this.abortSignal\n    }\n  }\n\n  get isIdempotent() {\n    return this.method == FetchMethod.get\n  }\n\n  get headers() {\n    return {\n      \"Accept\": \"text/html, application/xhtml+xml\",\n      ...this.additionalHeaders\n    }\n  }\n\n  get additionalHeaders() {\n    if (typeof this.delegate.additionalHeadersForRequest == \"function\") {\n      return this.delegate.additionalHeadersForRequest(this)\n    } else {\n      return {}\n    }\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n}\n","import { array } from \"./util\"\n\ntype ElementDetailMap = { [outerHTML: string]: ElementDetails }\n\ntype ElementDetails = { type?: ElementType, tracked: boolean, elements: Element[] }\n\ntype ElementType = \"script\" | \"stylesheet\"\n\nexport class HeadDetails {\n  readonly detailsByOuterHTML: ElementDetailMap\n\n  static fromHeadElement(headElement: HTMLHeadElement | null): HeadDetails {\n    const children = headElement ? array(headElement.children) : []\n    return new this(children)\n  }\n\n  constructor(children: Element[]) {\n    this.detailsByOuterHTML = children.reduce((result, element) => {\n      const { outerHTML } = element\n      const details: ElementDetails\n        = outerHTML in result\n        ? result[outerHTML]\n        : {\n          type: elementType(element),\n          tracked: elementIsTracked(element),\n          elements: []\n        }\n      return {\n        ...result,\n        [outerHTML]: {\n          ...details,\n          elements: [...details.elements, element]\n        }\n      }\n    }, {} as ElementDetailMap)\n  }\n\n  getTrackedElementSignature(): string {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInDetails(headDetails: HeadDetails) {\n    return this.getElementsMatchingTypeNotInDetails(\"script\", headDetails)\n  }\n\n  getStylesheetElementsNotInDetails(headDetails: HeadDetails) {\n    return this.getElementsMatchingTypeNotInDetails(\"stylesheet\", headDetails)\n  }\n\n  getElementsMatchingTypeNotInDetails(matchedType: ElementType, headDetails: HeadDetails) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => !(outerHTML in headDetails.detailsByOuterHTML))\n      .map(outerHTML => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  getProvisionalElements(): Element[] {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML]\n      if (type == null && !tracked) {\n        return [...result, ...elements]\n      } else if (elements.length > 1) {\n        return [...result, ...elements.slice(1)]\n      } else {\n        return result\n      }\n    }, [] as Element[])\n  }\n\n  getMetaValue(name: string): string | null {\n    const element = this.findMetaElementByName(name)\n    return element\n      ? element.getAttribute(\"content\")\n      : null\n  }\n\n  findMetaElementByName(name: string) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { elements: [element] } = this.detailsByOuterHTML[outerHTML]\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined as Element | undefined)\n  }\n}\n\nfunction elementType(element: Element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element: Element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"script\"\n}\n\nfunction elementIsStylesheet(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element: Element, name: string) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n","import { HeadDetails } from \"./head_details\"\nimport { Location } from \"./location\"\nimport { array } from \"./util\"\n\nexport class Snapshot {\n  static wrap(value: Snapshot | string | HTMLHtmlElement) {\n    if (value instanceof this) {\n      return value\n    } else if (typeof value == \"string\") {\n      return this.fromHTMLString(value)\n    } else {\n      return this.fromHTMLElement(value)\n    }\n  }\n\n  static fromHTMLString(html: string) {\n    const { documentElement } = new DOMParser().parseFromString(html, \"text/html\")\n    return this.fromHTMLElement(documentElement as HTMLHtmlElement)\n  }\n\n  static fromHTMLElement(htmlElement: HTMLHtmlElement) {\n    const headElement = htmlElement.querySelector(\"head\")\n    const bodyElement = htmlElement.querySelector(\"body\") || document.createElement(\"body\")\n    const headDetails = HeadDetails.fromHeadElement(headElement)\n    return new this(headDetails, bodyElement)\n  }\n\n  readonly headDetails: HeadDetails\n  readonly bodyElement: HTMLBodyElement\n\n  constructor(headDetails: HeadDetails, bodyElement: HTMLBodyElement) {\n    this.headDetails = headDetails\n    this.bodyElement = bodyElement\n  }\n\n  clone(): Snapshot {\n    const { bodyElement } = Snapshot.fromHTMLString(this.bodyElement.outerHTML)\n    return new Snapshot(this.headDetails, bodyElement)\n  }\n\n  getRootLocation() {\n    const root = this.getSetting(\"root\", \"/\")\n    return new Location(root)\n  }\n\n  getCacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  getElementForAnchor(anchor: string) {\n    try {\n      return this.bodyElement.querySelector(`[id='${anchor}'], a[name='${anchor}']`)\n    } catch {\n      return null\n    }\n  }\n\n  getPermanentElements() {\n    return array(this.bodyElement.querySelectorAll(\"[id][data-turbo-permanent]\"))\n  }\n\n  getPermanentElementById(id: string) {\n    return this.bodyElement.querySelector(`#${id}[data-turbo-permanent]`)\n  }\n\n  getPermanentElementsPresentInSnapshot(snapshot: Snapshot) {\n    return this.getPermanentElements().filter(({ id }) => snapshot.getPermanentElementById(id))\n  }\n\n  findFirstAutofocusableElement() {\n    return this.bodyElement.querySelector(\"[autofocus]\")\n  }\n\n  hasAnchor(anchor: string) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  isPreviewable() {\n    return this.getCacheControlValue() != \"no-preview\"\n  }\n\n  isCacheable() {\n    return this.getCacheControlValue() != \"no-cache\"\n  }\n\n  isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  // Private\n\n  getSetting(name: string): string | undefined\n  getSetting(name: string, defaultValue: string): string\n  getSetting(name: string, defaultValue?: string) {\n    const value = this.headDetails.getMetaValue(`turbo-${name}`)\n    return value == null ? defaultValue : value\n  }\n}\n","import { Adapter } from \"./adapter\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate } from \"./fetch_request\"\nimport { FetchResponse } from \"./fetch_response\"\nimport { History } from \"./history\"\nimport { Location } from \"./location\"\nimport { RenderCallback } from \"./renderer\"\nimport { Snapshot } from \"./snapshot\"\nimport { Action } from \"./types\"\nimport { uuid } from \"./util\"\nimport { View } from \"./view\"\n\nexport interface VisitDelegate {\n  readonly adapter: Adapter\n  readonly view: View\n  readonly history: History\n\n  visitStarted(visit: Visit): void\n  visitCompleted(visit: Visit): void\n}\n\nexport enum TimingMetric {\n  visitStart = \"visitStart\",\n  requestStart = \"requestStart\",\n  requestEnd = \"requestEnd\",\n  visitEnd = \"visitEnd\"\n}\n\nexport type TimingMetrics = Partial<{ [metric in TimingMetric]: any }>\n\nexport enum VisitState {\n  initialized = \"initialized\",\n  started = \"started\",\n  canceled = \"canceled\",\n  failed = \"failed\",\n  completed = \"completed\"\n}\n\nexport type VisitOptions = {\n  action: Action,\n  historyChanged: boolean,\n  referrer?: Location,\n  snapshotHTML?: string,\n  response?: VisitResponse\n}\n\nconst defaultOptions: VisitOptions = {\n  action: \"advance\",\n  historyChanged: false\n}\n\nexport type VisitResponse = {\n  statusCode: number,\n  responseHTML?: string\n}\n\nexport enum SystemStatusCode {\n  networkFailure = 0,\n  timeoutFailure = -1,\n  contentTypeMismatch = -2\n}\n\nexport class Visit implements FetchRequestDelegate {\n  readonly delegate: VisitDelegate\n  readonly identifier = uuid()\n  readonly restorationIdentifier: string\n  readonly action: Action\n  readonly referrer?: Location\n  readonly timingMetrics: TimingMetrics = {}\n\n  followedRedirect = false\n  frame?: number\n  historyChanged = false\n  location: Location\n  redirectedToLocation?: Location\n  request?: FetchRequest\n  response?: VisitResponse\n  scrolled = false\n  snapshotHTML?: string\n  snapshotCached = false\n  state = VisitState.initialized\n\n  constructor(delegate: VisitDelegate, location: Location, restorationIdentifier: string | undefined, options: Partial<VisitOptions> = {}) {\n    this.delegate = delegate\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier || uuid()\n\n    const { action, historyChanged, referrer, snapshotHTML, response } = { ...defaultOptions, ...options }\n    this.action = action\n    this.historyChanged = historyChanged\n    this.referrer = referrer\n    this.snapshotHTML = snapshotHTML\n    this.response = response\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart)\n      this.state = VisitState.started\n      this.adapter.visitStarted(this)\n      this.delegate.visitStarted(this)\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel()\n      }\n      this.cancelRender()\n      this.state = VisitState.canceled\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd)\n      this.state = VisitState.completed\n      this.adapter.visitCompleted(this)\n      this.delegate.visitCompleted(this)\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed\n      this.adapter.visitFailed(this)\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged) {\n      const actionForHistory = this.location.isEqualTo(this.referrer) ? \"replace\" : this.action\n      const method = this.getHistoryMethodForAction(actionForHistory)\n      this.history.update(method, this.location, this.restorationIdentifier)\n      this.historyChanged = true\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest()\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location)\n      this.request.perform()\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest()\n      this.recordResponse()\n      this.finishRequest()\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart)\n    this.adapter.visitRequestStarted(this)\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response\n    if (response) {\n      const { statusCode } = response\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this)\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode)\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd)\n    this.adapter.visitRequestFinished(this)\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response\n      this.render(() => {\n        this.cacheSnapshot()\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          this.view.render({ snapshot: Snapshot.fromHTMLString(responseHTML) }, this.performScroll)\n          this.adapter.visitRendered(this)\n          this.complete()\n        } else {\n          this.view.render({ error: responseHTML }, this.performScroll)\n          this.adapter.visitRendered(this)\n          this.fail()\n        }\n      })\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot()\n\n    if (snapshot && (!this.location.anchor || snapshot.hasAnchor(this.location.anchor))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable()) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return Snapshot.wrap(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot()\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest()\n      this.render(() => {\n        this.cacheSnapshot()\n        this.view.render({ snapshot, isPreview }, this.performScroll)\n        this.adapter.visitRendered(this)\n        if (!isPreview) {\n          this.complete()\n        }\n      })\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect) {\n      this.location = this.redirectedToLocation\n      this.history.replace(this.redirectedToLocation, this.restorationIdentifier)\n      this.followedRedirect = true\n    }\n  }\n\n  // Fetch request delegate\n\n  requestStarted() {\n    this.startRequest()\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  async requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.recordResponse({ statusCode: SystemStatusCode.networkFailure })\n  }\n\n  requestFinished() {\n    this.finishRequest()\n  }\n\n  // Scrolling\n\n  performScroll = () => {\n    if (!this.scrolled) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToTop()\n      } else {\n        this.scrollToAnchor() || this.scrollToTop()\n      }\n      this.scrolled = true\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition)\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    if (this.location.anchor != null) {\n      this.view.scrollToAnchor(this.location.anchor)\n      return true\n    }\n  }\n\n  scrollToTop() {\n    this.view.scrollToPosition({ x: 0, y: 0 })\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric: TimingMetric) {\n    this.timingMetrics[metric] = new Date().getTime()\n  }\n\n  getTimingMetrics(): TimingMetrics {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  getHistoryMethodForAction(action: Action) {\n    switch (action) {\n      case \"replace\": return history.replaceState\n      case \"advance\":\n      case \"restore\": return history.pushState\n    }\n  }\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    return this.action == \"restore\"\n      ? !this.hasCachedSnapshot()\n      : true\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot()\n      this.snapshotCached = true\n    }\n  }\n\n  render(callback: RenderCallback) {\n    this.cancelRender()\n    this.frame = requestAnimationFrame(() => {\n      delete this.frame\n      callback.call(this)\n    })\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame)\n      delete this.frame\n    }\n  }\n}\n\nfunction isSuccessful(statusCode: number) {\n  return statusCode >= 200 && statusCode < 300\n}\n","import { Adapter } from \"./adapter\"\nimport { Controller } from \"./controller\"\nimport { Locatable } from \"./location\"\nimport { ProgressBar } from \"./progress_bar\"\nimport { SystemStatusCode, Visit, VisitOptions } from \"./visit\"\nimport { uuid } from \"./util\"\n\nexport class BrowserAdapter implements Adapter {\n  readonly controller: Controller\n  readonly progressBar = new ProgressBar\n\n  progressBarTimeout?: number\n\n  constructor(controller: Controller) {\n    this.controller = controller\n  }\n\n  visitProposedToLocation(location: Locatable, options?: Partial<VisitOptions>) {\n    const restorationIdentifier = uuid()\n    this.controller.startVisitToLocation(location, restorationIdentifier, options)\n  }\n\n  visitStarted(visit: Visit) {\n    visit.issueRequest()\n    visit.changeHistory()\n    visit.loadCachedSnapshot()\n  }\n\n  visitRequestStarted(visit: Visit) {\n    this.progressBar.setValue(0)\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showProgressBarAfterDelay()\n    } else {\n      this.showProgressBar()\n    }\n  }\n\n  visitRequestCompleted(visit: Visit) {\n    visit.loadResponse()\n  }\n\n  visitRequestFailedWithStatusCode(visit: Visit, statusCode: number) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload()\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(visit: Visit) {\n    this.progressBar.setValue(1)\n    this.hideProgressBar()\n  }\n\n  visitCompleted(visit: Visit) {\n    visit.followRedirect()\n  }\n\n  pageInvalidated() {\n    this.reload()\n  }\n\n  visitFailed(visit: Visit) {\n\n  }\n\n  visitRendered(visit: Visit) {\n\n  }\n\n  // Private\n\n  showProgressBarAfterDelay() {\n    this.progressBarTimeout = window.setTimeout(this.showProgressBar, this.controller.progressBarDelay)\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show()\n  }\n\n  hideProgressBar() {\n    this.progressBar.hide()\n    if (this.progressBarTimeout != null) {\n      window.clearTimeout(this.progressBarTimeout)\n      delete this.progressBarTimeout\n    }\n  }\n\n  reload() {\n    window.location.reload()\n  }\n}\n","export interface FormSubmitObserverDelegate {\n  willSubmitForm(form: HTMLFormElement): boolean\n  formSubmitted(form: HTMLFormElement): void\n}\n\nexport class FormSubmitObserver {\n  readonly delegate: FormSubmitObserverDelegate\n  started = false\n\n  constructor(delegate: FormSubmitObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"submit\", this.submitCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"submit\", this.submitCaptured, true)\n      this.started = false\n    }\n  }\n\n  submitCaptured = () => {\n    removeEventListener(\"submit\", this.submitBubbled, false)\n    addEventListener(\"submit\", this.submitBubbled, false)\n  }\n\n  submitBubbled = (event: Event) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined\n      if (form) {\n        if (this.delegate.willSubmitForm(form)) {\n          event.preventDefault()\n          this.delegate.formSubmitted(form)\n        }\n      }\n    }\n  }\n}\n","export interface FormInterceptorDelegate {\n  shouldInterceptFormSubmission(element: HTMLFormElement): boolean\n  formSubmissionIntercepted(element: HTMLFormElement): void\n}\n\nexport class FormInterceptor {\n  readonly delegate: FormInterceptorDelegate\n  readonly element: Element\n\n  constructor(delegate: FormInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"submit\", this.submitBubbled)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"submit\", this.submitBubbled)\n  }\n\n  submitBubbled = (event: Event) => {\n    if (event.target instanceof HTMLFormElement) {\n      const form = event.target\n      if (this.delegate.shouldInterceptFormSubmission(form)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n        this.delegate.formSubmissionIntercepted(form)\n      }\n    }\n  }\n}\n","import { FetchRequest, FetchMethod, fetchMethodFromString, FetchRequestHeaders } from \"./fetch_request\"\nimport { FetchResponse } from \"./fetch_response\"\nimport { Location } from \"./location\"\nimport { dispatch } from \"./util\"\n\nexport interface FormSubmissionDelegate {\n  formSubmissionStarted(formSubmission: FormSubmission): void\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error): void\n  formSubmissionFinished(formSubmission: FormSubmission): void\n}\n\nexport type FormSubmissionResult\n  = { success: boolean, fetchResponse: FetchResponse }\n  | { success: false, error: Error }\n\nexport enum FormSubmissionState {\n  initialized,\n  requesting,\n  waiting,\n  receiving,\n  stopping,\n  stopped,\n}\n\nexport class FormSubmission {\n  readonly delegate: FormSubmissionDelegate\n  readonly formElement: HTMLFormElement\n  readonly formData: FormData\n  readonly fetchRequest: FetchRequest\n  readonly mustRedirect: boolean\n  state = FormSubmissionState.initialized\n  result?: FormSubmissionResult\n\n  constructor(delegate: FormSubmissionDelegate, formElement: HTMLFormElement, mustRedirect = false) {\n    this.delegate = delegate\n    this.formElement = formElement\n    this.formData = new FormData(formElement)\n    this.fetchRequest = new FetchRequest(this, this.method, this.location, this.formData)\n    this.mustRedirect = mustRedirect\n  }\n\n  get method(): FetchMethod {\n    const method = this.formElement.getAttribute(\"method\") || \"\"\n    return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n  }\n\n  get location() {\n    return Location.wrap(this.formElement.action)\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState\n    if (this.state == initialized) {\n      this.state = requesting\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping\n      this.fetchRequest.cancel()\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  additionalHeadersForRequest(request: FetchRequest) {\n    const headers: FetchRequestHeaders = {}\n    if (this.method != FetchMethod.get) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\")\n      if (token) {\n        headers[\"X-CSRF-Token\"] = token\n      }\n    }\n    return headers\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.state = FormSubmissionState.waiting\n    dispatch(\"turbo:submit-start\", { target: this.formElement, data: { formSubmission: this } })\n    this.delegate.formSubmissionStarted(this)\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: response.succeeded, fetchResponse: response }\n  }\n\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    if (this.requestMustRedirect(request) && !response.redirected) {\n      const error = new Error(\"Form responses must redirect to another location\")\n      this.delegate.formSubmissionErrored(this, error)\n    } else {\n      this.state = FormSubmissionState.receiving\n      this.result = { success: true, fetchResponse: response }\n      this.delegate.formSubmissionSucceededWithResponse(this, response)\n    }\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: false, fetchResponse: response }\n    this.delegate.formSubmissionFailedWithResponse(this, response)\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.result = { success: false, error }\n    this.delegate.formSubmissionErrored(this, error)\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.state = FormSubmissionState.stopped\n    dispatch(\"turbo:submit-end\", { target: this.formElement, data: { formSubmission: this, ...this.result }})\n    this.delegate.formSubmissionFinished(this)\n  }\n\n  requestMustRedirect(request: FetchRequest) {\n    return !request.isIdempotent && this.mustRedirect\n  }\n}\n\nfunction getCookieValue(cookieName: string | null) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : []\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName))\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\")\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction getMetaContent(name: string) {\n  const element: HTMLMetaElement | null = document.querySelector(`meta[name=\"${name}\"]`)\n  return element && element.content\n}\n","export interface TurboClickEvent extends Event {\n  target: Element\n  data: { url: string }\n}\n\nexport interface LinkInterceptorDelegate {\n  shouldInterceptLinkClick(element: Element, url: string): boolean\n  linkClickIntercepted(element: Element, url: string): void\n}\n\nexport class LinkInterceptor {\n  readonly delegate: LinkInterceptorDelegate\n  readonly element: Element\n  private clickEvent?: Event\n\n  constructor(delegate: LinkInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled)\n    document.addEventListener(\"turbo:click\", this.linkClicked)\n    document.addEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled)\n    document.removeEventListener(\"turbo:click\", this.linkClicked)\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  clickBubbled = (event: Event) => {\n    if (this.respondsToEventTarget(event.target)) {\n      this.clickEvent = event\n    } else {\n      delete this.clickEvent\n    }\n  }\n\n  linkClicked = <EventListener>((event: TurboClickEvent) => {\n    if (this.clickEvent && this.respondsToEventTarget(event.target)) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.data.url)) {\n        this.clickEvent.preventDefault()\n        event.preventDefault()\n        this.delegate.linkClickIntercepted(event.target, event.data.url)\n      }\n    }\n    delete this.clickEvent\n  })\n\n  willVisit = () => {\n    delete this.clickEvent\n  }\n\n  respondsToEventTarget(target: EventTarget | null) {\n    const element\n      = target instanceof Element\n      ? target\n        : target instanceof Node\n        ? target.parentElement\n          : null\n    return element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n","import { FetchMethod, FetchRequest, FetchRequestDelegate } from \"./fetch_request\"\nimport { FetchResponse } from \"./fetch_response\"\nimport { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FormSubmission, FormSubmissionDelegate } from \"./form_submission\"\nimport { FrameElement } from \"./elements/frame_element\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\nimport { Locatable, Location } from \"./location\"\nimport { nextAnimationFrame } from \"./util\"\n\nexport class FrameController implements FetchRequestDelegate, FormInterceptorDelegate, FormSubmissionDelegate, LinkInterceptorDelegate {\n  readonly element: FrameElement\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n  formSubmission?: FormSubmission\n  private resolveVisitPromise = () => {}\n\n  constructor(element: FrameElement) {\n    this.element = element\n    this.linkInterceptor = new LinkInterceptor(this, this.element)\n    this.formInterceptor = new FormInterceptor(this, this.element)\n  }\n\n  connect() {\n    this.linkInterceptor.start()\n    this.formInterceptor.start()\n  }\n\n  disconnect() {\n    this.linkInterceptor.stop()\n    this.formInterceptor.stop()\n  }\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    return this.shouldInterceptNavigation(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    frame.src = url\n  }\n\n  shouldInterceptFormSubmission(element: HTMLFormElement) {\n    return this.shouldInterceptNavigation(element)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement) {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n    }\n\n    this.formSubmission = new FormSubmission(this, element)\n    this.formSubmission.start()\n  }\n\n  async visit(url: Locatable) {\n    const location = Location.wrap(url)\n    const request = new FetchRequest(this, FetchMethod.get, location)\n\n    return new Promise(resolve => {\n      this.resolveVisitPromise = () => {\n        this.resolveVisitPromise = () => {}\n        resolve()\n      }\n      request.perform()\n    })\n  }\n\n  additionalHeadersForRequest(request: FetchRequest) {\n    return { \"X-Turbo-Frame\": this.id }\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.element.setAttribute(\"busy\", \"\")\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.resolveVisitPromise()\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    await this.loadResponse(response)\n    this.resolveVisitPromise()\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    console.error(response)\n    this.resolveVisitPromise()\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    console.error(error)\n    this.resolveVisitPromise()\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.element.removeAttribute(\"busy\")\n  }\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, response: FetchResponse) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.controller.loadResponse(response)\n  }\n\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\")\n    return getFrameElementById(id) ?? this.element\n  }\n\n  private async loadResponse(response: FetchResponse): Promise<void> {\n    const fragment = fragmentFromHTML(await response.responseHTML)\n    const element = await this.extractForeignFrameElement(fragment)\n\n    if (element) {\n      await nextAnimationFrame()\n      this.loadFrameElement(element)\n      this.scrollFrameIntoView(element)\n      await nextAnimationFrame()\n      this.focusFirstAutofocusableElement()\n    }\n  }\n\n  private async extractForeignFrameElement(container: ParentNode): Promise<FrameElement | undefined> {\n    let element\n    const id = CSS.escape(this.id)\n\n    if (element = activateElement(container.querySelector(`turbo-frame#${id}`))) {\n      return element\n    }\n\n    if (element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`))) {\n      await element.loaded\n      return await this.extractForeignFrameElement(element)\n    }\n  }\n\n  private loadFrameElement(frameElement: FrameElement) {\n    const destinationRange = document.createRange()\n    destinationRange.selectNodeContents(this.element)\n    destinationRange.deleteContents()\n\n    const sourceRange = frameElement.ownerDocument?.createRange()\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement)\n      this.element.appendChild(sourceRange.extractContents())\n    }\n  }\n\n  private focusFirstAutofocusableElement(): boolean {\n    const element = this.firstAutofocusableElement\n    if (element) {\n      element.focus()\n      return true\n    }\n    return false\n  }\n\n  private scrollFrameIntoView(frame: FrameElement): boolean {\n    if (this.element.autoscroll || frame.autoscroll) {\n      const element = this.element.firstElementChild\n      const block = readScrollLogicalPosition(this.element.getAttribute(\"data-autoscroll-block\"), \"end\")\n\n      if (element) {\n        element.scrollIntoView({ block })\n        return true\n      }\n    }\n    return false\n  }\n\n  private shouldInterceptNavigation(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\") || this.element.getAttribute(\"target\")\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = getFrameElementById(id)\n      if (frameElement) {\n        return !frameElement.disabled\n      }\n    }\n\n    return true\n  }\n\n  get firstAutofocusableElement(): HTMLElement | null {\n    const element = this.element.querySelector(\"[autofocus]\")\n    return element instanceof HTMLElement ? element : null\n  }\n\n  get id() {\n    return this.element.id\n  }\n\n  get enabled() {\n    return !this.element.disabled\n  }\n}\n\nfunction getFrameElementById(id: string | null) {\n  if (id != null) {\n    const element = document.getElementById(id)\n    if (element instanceof FrameElement) {\n      return element\n    }\n  }\n}\n\nfunction readScrollLogicalPosition(value: string | null, defaultValue: ScrollLogicalPosition): ScrollLogicalPosition {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\nfunction fragmentFromHTML(html = \"\") {\n  const foreignDocument = document.implementation.createHTMLDocument()\n  return foreignDocument.createRange().createContextualFragment(html)\n}\n\nfunction activateElement(element: Node | null) {\n  if (element && element.ownerDocument !== document) {\n    element = document.importNode(element, true)\n  }\n\n  if (element instanceof FrameElement) {\n    return element\n  }\n}\n","import { FetchResponse } from \"../fetch_response\"\nimport { FrameController } from \"../frame_controller\"\n\nexport class FrameElement extends HTMLElement {\n  readonly controller: FrameController\n\n  static get observedAttributes() {\n    return [\"src\"]\n  }\n\n  constructor() {\n    super()\n    this.controller = new FrameController(this)\n  }\n\n  connectedCallback() {\n    this.controller.connect()\n  }\n\n  disconnectedCallback() {\n    this.controller.disconnect()\n  }\n\n  attributeChangedCallback() {\n    if (this.src && this.isActive) {\n      const value = this.controller.visit(this.src)\n      Object.defineProperty(this, \"loaded\", { value, configurable: true })\n    }\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement) {\n    this.controller.formSubmissionIntercepted(element)\n  }\n\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  set src(value: string | null) {\n    if (value) {\n      this.setAttribute(\"src\", value)\n    } else {\n      this.removeAttribute(\"src\")\n    }\n  }\n\n  get loaded(): Promise<FetchResponse | undefined> {\n    return Promise.resolve(undefined)\n  }\n\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\")\n    } else {\n      this.removeAttribute(\"disabled\")\n    }\n  }\n\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  set autoscroll(value: boolean) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\")\n    } else {\n      this.removeAttribute(\"autoscroll\")\n    }\n  }\n\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\ncustomElements.define(\"turbo-frame\", FrameElement)\n","import { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FrameElement } from \"./elements/frame_element\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\n\nexport class FrameRedirector implements LinkInterceptorDelegate, FormInterceptorDelegate {\n  readonly element: Element\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n\n  constructor(element: Element) {\n    this.element = element\n    this.linkInterceptor = new LinkInterceptor(this, element)\n    this.formInterceptor = new FormInterceptor(this, element)\n  }\n\n  start() {\n    this.linkInterceptor.start()\n    this.formInterceptor.start()\n  }\n\n  stop() {\n    this.linkInterceptor.stop()\n    this.formInterceptor.stop()\n  }\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    return this.shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.src = url\n    }\n  }\n\n  shouldInterceptFormSubmission(element: HTMLFormElement) {\n    return this.shouldRedirect(element)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.formSubmissionIntercepted(element)\n    }\n  }\n\n  private shouldRedirect(element: Element) {\n    const frame = this.findFrameElement(element)\n    return frame ? frame != element.closest(\"turbo-frame\") : false\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\")\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`)\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n","import { Location } from \"./location\"\nimport { Position } from \"./types\"\nimport { defer, uuid } from \"./util\"\n\nexport interface HistoryDelegate {\n  historyPoppedToLocationWithRestorationIdentifier(location: Location, restorationIdentifier: string): void\n}\n\ntype HistoryMethod = (this: typeof history, state: any, title: string, url?: string | null | undefined) => void\n\nexport type RestorationData = { scrollPosition?: Position }\n\nexport type RestorationDataMap = { [restorationIdentifier: string]: RestorationData }\n\nexport class History {\n  readonly delegate: HistoryDelegate\n  location!: Location\n  restorationIdentifier!: string\n  restorationData: RestorationDataMap = {}\n  started = false\n  pageLoaded = false\n  previousScrollRestoration?: ScrollRestoration\n\n  constructor(delegate: HistoryDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      this.previousScrollRestoration = history.scrollRestoration\n      history.scrollRestoration = \"manual\"\n      addEventListener(\"popstate\", this.onPopState, false)\n      addEventListener(\"load\", this.onPageLoad, false)\n      this.started = true\n      this.replace(Location.currentLocation)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      history.scrollRestoration = this.previousScrollRestoration ?? \"auto\"\n      removeEventListener(\"popstate\", this.onPopState, false)\n      removeEventListener(\"load\", this.onPageLoad, false)\n      this.started = false\n    }\n  }\n\n  push(location: Location, restorationIdentifier?: string) {\n    this.update(history.pushState, location, restorationIdentifier)\n  }\n\n  replace(location: Location, restorationIdentifier?: string) {\n    this.update(history.replaceState, location, restorationIdentifier)\n  }\n\n  update(method: HistoryMethod, location: Location, restorationIdentifier = uuid()) {\n    const state = { turbo: { restorationIdentifier } }\n    method.call(history, state, \"\", location.absoluteURL)\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier: string): RestorationData {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData: Partial<RestorationData>) {\n    const { restorationIdentifier } = this\n    const restorationData = this.restorationData[restorationIdentifier]\n    this.restorationData[restorationIdentifier] = { ...restorationData, ...additionalData }\n  }\n\n  // Event handlers\n\n  onPopState = (event: PopStateEvent) => {\n    if (this.shouldHandlePopState()) {\n      const { turbo } = event.state || {}\n      if (turbo) {\n        const location = Location.currentLocation\n        this.location = location\n        const { restorationIdentifier } = turbo\n        this.restorationIdentifier = restorationIdentifier\n        this.delegate.historyPoppedToLocationWithRestorationIdentifier(location, restorationIdentifier)\n      }\n    }\n  }\n\n  onPageLoad = (event: Event) => {\n    defer(() => {\n      this.pageLoaded = true\n    })\n  }\n\n  // Private\n\n  shouldHandlePopState() {\n    // Safari dispatches a popstate event after window's load event, ignore it\n    return this.pageIsLoaded()\n  }\n\n  pageIsLoaded() {\n    return this.pageLoaded || document.readyState == \"complete\"\n  }\n}\n","import { Location } from \"./location\"\nimport { closest } from \"./util\"\n\nexport interface LinkClickObserverDelegate {\n  willFollowLinkToLocation(link: Element, location: Location): boolean\n  followedLinkToLocation(link: Element, location: Location): void\n}\n\nexport class LinkClickObserver {\n  readonly delegate: LinkClickObserverDelegate\n  started = false\n\n  constructor(delegate: LinkClickObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"click\", this.clickCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"click\", this.clickCaptured, true)\n      this.started = false\n    }\n  }\n\n  clickCaptured = () => {\n    removeEventListener(\"click\", this.clickBubbled, false)\n    addEventListener(\"click\", this.clickBubbled, false)\n  }\n\n  clickBubbled = (event: MouseEvent) => {\n    if (this.clickEventIsSignificant(event)) {\n      const link = this.findLinkFromClickTarget(event.target)\n      if (link) {\n        const location = this.getLocationForLink(link)\n        if (this.delegate.willFollowLinkToLocation(link, location)) {\n          event.preventDefault()\n          this.delegate.followedLinkToLocation(link, location)\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event: MouseEvent) {\n    return !(\n      (event.target && (event.target as any).isContentEditable)\n      || event.defaultPrevented\n      || event.which > 1\n      || event.altKey\n      || event.ctrlKey\n      || event.metaKey\n      || event.shiftKey\n    )\n  }\n\n  findLinkFromClickTarget(target: EventTarget | null) {\n    if (target instanceof Element) {\n      return closest(target, \"a[href]:not([target^=_]):not([download])\")\n    }\n  }\n\n  getLocationForLink(link: Element) {\n    return new Location(link.getAttribute(\"href\") || \"\")\n  }\n}\n","import { FetchMethod } from \"./fetch_request\"\nimport { FetchResponse } from \"./fetch_response\"\nimport { FormSubmission } from \"./form_submission\"\nimport { Location } from \"./location\"\nimport { Visit, VisitDelegate, VisitOptions } from \"./visit\"\n\nexport type NavigatorDelegate = VisitDelegate & {\n  allowsVisitingLocation(location: Location): boolean\n  visitProposedToLocation(location: Location, options: Partial<VisitOptions>): void\n}\n\nexport class Navigator {\n  readonly delegate: NavigatorDelegate\n  formSubmission?: FormSubmission\n  currentVisit?: Visit\n\n  constructor(delegate: NavigatorDelegate) {\n    this.delegate = delegate\n  }\n\n  proposeVisit(location: Location, options: Partial<VisitOptions> = {}) {\n    if (this.delegate.allowsVisitingLocation(location)) {\n      this.delegate.visitProposedToLocation(location, options)\n    }\n  }\n\n  startVisit(location: Location, restorationIdentifier: string, options: Partial<VisitOptions> = {}) {\n    this.stop()\n    this.currentVisit = new Visit(this, location, restorationIdentifier, {\n      referrer: this.location,\n      ...options\n    })\n    this.currentVisit.start()\n  }\n\n  submitForm(form: HTMLFormElement) {\n    this.stop()\n    this.formSubmission = new FormSubmission(this, form, true)\n    this.formSubmission.start()\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n      delete this.formSubmission\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel()\n      delete this.currentVisit\n    }\n  }\n\n  reload() {\n\n  }\n\n  goBack() {\n\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    console.log(\"Form submission succeeded\", formSubmission)\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML\n      if (responseHTML) {\n        if (formSubmission.method != FetchMethod.get) {\n          console.log(\"Clearing snapshot cache after successful form submission\")\n          this.view.clearSnapshotCache()\n        }\n\n        const { statusCode } = fetchResponse\n        const visitOptions = { response: { statusCode, responseHTML } }\n        console.log(\"Visiting\", fetchResponse.location, visitOptions)\n        this.proposeVisit(fetchResponse.location, visitOptions)\n      }\n    }\n  }\n\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    console.error(\"Form submission failed\", formSubmission, fetchResponse)\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(\"Form submission failed\", formSubmission, error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n\n  }\n\n  // Visit delegate\n\n  visitStarted(visit: Visit) {\n    this.delegate.visitStarted(visit)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.delegate.visitCompleted(visit)\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n}\n","export interface PageObserverDelegate {\n  pageBecameInteractive(): void\n  pageLoaded(): void\n  pageInvalidated(): void\n}\n\nexport enum PageStage {\n  initial,\n  loading,\n  interactive,\n  complete,\n  invalidated\n}\n\nexport class PageObserver {\n  readonly delegate: PageObserverDelegate\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate: PageObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false)\n      this.started = false\n    }\n  }\n\n  invalidate() {\n    if (this.stage != PageStage.invalidated) {\n      this.stage = PageStage.invalidated\n      this.delegate.pageInvalidated()\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive()\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete()\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive\n      this.delegate.pageBecameInteractive()\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive()\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete\n      this.delegate.pageLoaded()\n    }\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n","import { Position } from \"./types\"\n\nexport interface ScrollObserverDelegate {\n  scrollPositionChanged(position: Position): void\n}\n\nexport class ScrollObserver {\n  readonly delegate: ScrollObserverDelegate\n  started = false\n\n  constructor(delegate: ScrollObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false)\n      this.onScroll()\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false)\n      this.started = false\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset })\n  }\n\n  // Private\n\n  updatePosition(position: Position) {\n    this.delegate.scrollPositionChanged(position)\n  }\n}\n","import { StreamElement } from \"./elements/stream_element\"\n\nexport class StreamMessage {\n  static readonly contentType = \"text/html; turbo-stream\"\n\n  readonly templateElement = document.createElement(\"template\")\n\n  static wrap(message: StreamMessage | string) {\n    if (typeof message == \"string\") {\n      return new this(message)\n    } else {\n      return message\n    }\n  }\n\n  constructor(html: string) {\n    this.templateElement.innerHTML = html\n  }\n\n  get fragment() {\n    const fragment = document.createDocumentFragment()\n    for (const element of this.foreignElements) {\n      fragment.appendChild(document.importNode(element, true))\n    }\n    return fragment\n  }\n\n  get foreignElements() {\n    return this.templateChildren.reduce((streamElements, child) => {\n      if (child.tagName.toLowerCase() == \"turbo-stream\") {\n        return [ ...streamElements, child as StreamElement ]\n      } else {\n        return streamElements\n      }\n    }, [] as StreamElement[])\n  }\n\n  get templateChildren() {\n    return Array.from(this.templateElement.content.children)\n  }\n}\n","import { FetchRequestOptions } from \"./fetch_request\"\nimport { FetchResponse } from \"./fetch_response\"\nimport { StreamMessage } from \"./stream_message\"\nimport { StreamSource } from \"./types\"\n\nexport interface StreamObserverDelegate {\n  receivedMessageFromStream(message: StreamMessage): void\n}\n\nexport class StreamObserver {\n  readonly delegate: StreamObserverDelegate\n  readonly sources: Set<StreamSource> = new Set\n  private started = false\n\n  constructor(delegate: StreamObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-fetch-request\", this.prepareFetchRequest, true)\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-fetch-request\", this.prepareFetchRequest, true)\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  connectStreamSource(source: StreamSource) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source)\n      source.addEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source)\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  streamSourceIsConnected(source: StreamSource) {\n    return this.sources.has(source)\n  }\n\n  prepareFetchRequest = (event: Event) => {\n    const fetchOptions: FetchRequestOptions = (event as any).data?.fetchOptions\n    if (fetchOptions) {\n      const { headers } = fetchOptions\n      headers.Accept = [ StreamMessage.contentType, headers.Accept ].join(\", \")\n    }\n  }\n\n  inspectFetchResponse = (event: Event) => {\n    const fetchResponse = fetchResponseFromEvent(event)\n    if (fetchResponse?.contentType == StreamMessage.contentType + \"; charset=utf-8\") {\n      event.preventDefault()\n      this.receiveMessageResponse(fetchResponse)\n    }\n  }\n\n  receiveMessageEvent = (event: MessageEvent) => {\n    if (this.started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data)\n    }\n  }\n\n  async receiveMessageResponse(response: FetchResponse) {\n    const html = await response.responseHTML\n    if (html) {\n      this.receiveMessageHTML(html)\n    }\n  }\n\n  receiveMessageHTML(html: string) {\n    this.delegate.receivedMessageFromStream(new StreamMessage(html))\n  }\n}\n\nfunction fetchResponseFromEvent(event: any): FetchResponse | undefined {\n  if (event.data?.fetchResponse instanceof FetchResponse) {\n    return event.data.fetchResponse\n  }\n}\n","export type Action = \"advance\" | \"replace\" | \"restore\"\n\nexport function isAction(action: any): action is Action {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nexport type Position = { x: number, y: number }\n\nexport type StreamSource = {\n  addEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | AddEventListenerOptions): void\n  removeEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | EventListenerOptions): void\n}\n","import { array } from \"./util\"\n\nexport type RenderCallback = () => void\n\nexport interface RenderDelegate {\n  viewWillRender(newBody: HTMLBodyElement): void\n  viewRendered(newBody: HTMLBodyElement): void\n  viewInvalidated(): void\n}\n\nexport abstract class Renderer {\n  abstract delegate: RenderDelegate\n  abstract newBody: HTMLBodyElement\n\n  renderView(callback: RenderCallback) {\n    this.delegate.viewWillRender(this.newBody)\n    callback()\n    this.delegate.viewRendered(this.newBody)\n  }\n\n  invalidateView() {\n    this.delegate.viewInvalidated()\n  }\n\n  createScriptElement(element: Element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n      return element\n    } else {\n      const createdScriptElement = document.createElement(\"script\")\n      createdScriptElement.textContent = element.textContent\n      createdScriptElement.async = false\n      copyElementAttributes(createdScriptElement, element)\n      return createdScriptElement\n    }\n  }\n}\n\nfunction copyElementAttributes(destinationElement: Element, sourceElement: Element) {\n  for (const { name, value } of array(sourceElement.attributes)) {\n    destinationElement.setAttribute(name, value)\n  }\n}\n","import { RenderCallback, RenderDelegate, Renderer } from \"./renderer\"\nimport { array } from \"./util\"\n\nexport class ErrorRenderer extends Renderer {\n  readonly delegate: RenderDelegate\n  readonly htmlElement: HTMLHtmlElement\n  readonly newHead: HTMLHeadElement\n  readonly newBody: HTMLBodyElement\n\n  static render(delegate: RenderDelegate, callback: RenderCallback, html: string) {\n    return new this(delegate, html).render(callback)\n  }\n\n  constructor(delegate: RenderDelegate, html: string) {\n    super()\n    this.delegate = delegate\n    this.htmlElement = (() => {\n      const htmlElement = document.createElement(\"html\")\n      htmlElement.innerHTML = html\n      return htmlElement\n    })()\n    this.newHead = this.htmlElement.querySelector(\"head\") || document.createElement(\"head\")\n    this.newBody = this.htmlElement.querySelector(\"body\") || document.createElement(\"body\")\n  }\n\n  render(callback: RenderCallback) {\n    this.renderView(() => {\n      this.replaceHeadAndBody()\n      this.activateBodyScriptElements()\n      callback()\n    })\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head, body } = document\n    documentElement.replaceChild(this.newHead, head)\n    documentElement.replaceChild(this.newBody, body)\n  }\n\n  activateBodyScriptElements() {\n    for (const replaceableElement of this.getScriptElements()) {\n      const parentNode = replaceableElement.parentNode\n      if (parentNode) {\n        const element = this.createScriptElement(replaceableElement)\n        parentNode.replaceChild(element, replaceableElement)\n      }\n    }\n  }\n\n  getScriptElements() {\n    return array(document.documentElement.querySelectorAll(\"script\"))\n  }\n}\n","import { Location } from \"./location\"\nimport { Snapshot } from \"./snapshot\"\n\nexport class SnapshotCache {\n  readonly keys: string[] = []\n  readonly size: number\n  snapshots: { [url: string]: Snapshot } = {}\n\n  constructor(size: number) {\n    this.size = size\n  }\n\n  has(location: Location) {\n    return location.toCacheKey() in this.snapshots\n  }\n\n  get(location: Location): Snapshot | undefined {\n    if (this.has(location)) {\n      const snapshot = this.read(location)\n      this.touch(location)\n      return snapshot\n    }\n  }\n\n  put(location: Location, snapshot: Snapshot) {\n    this.write(location, snapshot)\n    this.touch(location)\n    return snapshot\n  }\n\n  clear() {\n    this.snapshots = {}\n  }\n\n  // Private\n\n  read(location: Location) {\n    return this.snapshots[location.toCacheKey()]\n  }\n\n  write(location: Location, snapshot: Snapshot) {\n    this.snapshots[location.toCacheKey()] = snapshot\n  }\n\n  touch(location: Location) {\n    const key = location.toCacheKey()\n    const index = this.keys.indexOf(key)\n    if (index > -1) this.keys.splice(index, 1)\n    this.keys.unshift(key)\n    this.trim()\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      delete this.snapshots[key]\n    }\n  }\n}\n","import { HeadDetails } from \"./head_details\"\nimport { RenderCallback, RenderDelegate, Renderer } from \"./renderer\"\nimport { Snapshot } from \"./snapshot\"\nimport { array } from \"./util\"\n\nexport { RenderCallback, RenderDelegate } from \"./renderer\"\n\nexport type PermanentElement = Element & { id: string }\n\nexport type Placeholder = { element: Element, permanentElement: PermanentElement }\n\nexport class SnapshotRenderer extends Renderer {\n  readonly delegate: RenderDelegate\n  readonly currentSnapshot: Snapshot\n  readonly currentHeadDetails: HeadDetails\n  readonly newSnapshot: Snapshot\n  readonly newHeadDetails: HeadDetails\n  readonly newBody: HTMLBodyElement\n  readonly isPreview: boolean\n\n  static render(delegate: RenderDelegate, callback: RenderCallback, currentSnapshot: Snapshot, newSnapshot: Snapshot, isPreview: boolean) {\n    return new this(delegate, currentSnapshot, newSnapshot, isPreview).render(callback)\n  }\n\n  constructor(delegate: RenderDelegate, currentSnapshot: Snapshot, newSnapshot: Snapshot, isPreview: boolean) {\n    super()\n    this.delegate = delegate\n    this.currentSnapshot = currentSnapshot\n    this.currentHeadDetails = currentSnapshot.headDetails\n    this.newSnapshot = newSnapshot\n    this.newHeadDetails = newSnapshot.headDetails\n    this.newBody = newSnapshot.bodyElement\n    this.isPreview = isPreview\n  }\n\n  render(callback: RenderCallback) {\n    if (this.shouldRender()) {\n      this.mergeHead()\n      this.renderView(() => {\n        this.replaceBody()\n        if (!this.isPreview) {\n          this.focusFirstAutofocusableElement()\n        }\n        callback()\n      })\n    } else {\n      this.invalidateView()\n    }\n  }\n\n  mergeHead() {\n    this.copyNewHeadStylesheetElements()\n    this.copyNewHeadScriptElements()\n    this.removeCurrentHeadProvisionalElements()\n    this.copyNewHeadProvisionalElements()\n  }\n\n  replaceBody() {\n    const placeholders = this.relocateCurrentBodyPermanentElements()\n    this.activateNewBody()\n    this.assignNewBody()\n    this.replacePlaceholderElementsWithClonedPermanentElements(placeholders)\n  }\n\n  shouldRender() {\n    return this.newSnapshot.isVisitable() && this.trackedElementsAreIdentical()\n  }\n\n  trackedElementsAreIdentical() {\n    return this.currentHeadDetails.getTrackedElementSignature() == this.newHeadDetails.getTrackedElementSignature()\n  }\n\n  copyNewHeadStylesheetElements() {\n    for (const element of this.getNewHeadStylesheetElements()) {\n      document.head.appendChild(element)\n    }\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.getNewHeadScriptElements()) {\n      document.head.appendChild(this.createScriptElement(element))\n    }\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.getCurrentHeadProvisionalElements()) {\n      document.head.removeChild(element)\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.getNewHeadProvisionalElements()) {\n      document.head.appendChild(element)\n    }\n  }\n\n  relocateCurrentBodyPermanentElements() {\n    return this.getCurrentBodyPermanentElements().reduce((placeholders, permanentElement) => {\n      const newElement = this.newSnapshot.getPermanentElementById(permanentElement.id)\n      if (newElement) {\n        const placeholder = createPlaceholderForPermanentElement(permanentElement)\n        replaceElementWithElement(permanentElement, placeholder.element)\n        replaceElementWithElement(newElement, permanentElement)\n        return [...placeholders, placeholder]\n      } else {\n        return placeholders\n      }\n    }, [] as Placeholder[])\n  }\n\n  replacePlaceholderElementsWithClonedPermanentElements(placeholders: Placeholder[]) {\n    for (const { element, permanentElement } of placeholders) {\n      const clonedElement = permanentElement.cloneNode(true)\n      replaceElementWithElement(element, clonedElement)\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newBody)\n    this.activateNewBodyScriptElements()\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.getNewBodyScriptElements()) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      replaceElementWithElement(inertScriptElement, activatedScriptElement)\n    }\n  }\n\n  assignNewBody() {\n    if (document.body) {\n      replaceElementWithElement(document.body, this.newBody)\n    } else {\n      document.documentElement.appendChild(this.newBody)\n    }\n  }\n\n  focusFirstAutofocusableElement() {\n    const element = this.newSnapshot.findFirstAutofocusableElement()\n    if (elementIsFocusable(element)) {\n      element.focus()\n    }\n  }\n\n  getNewHeadStylesheetElements() {\n    return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)\n  }\n\n  getNewHeadScriptElements() {\n    return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)\n  }\n\n  getCurrentHeadProvisionalElements() {\n    return this.currentHeadDetails.getProvisionalElements()\n  }\n\n  getNewHeadProvisionalElements() {\n    return this.newHeadDetails.getProvisionalElements()\n  }\n\n  getCurrentBodyPermanentElements(): PermanentElement[] {\n    return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)\n  }\n\n  getNewBodyScriptElements() {\n    return array(this.newBody.querySelectorAll(\"script\"))\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement: PermanentElement) {\n  const element = document.createElement(\"meta\")\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\")\n  element.setAttribute(\"content\", permanentElement.id)\n  return { element, permanentElement }\n}\n\nfunction replaceElementWithElement(fromElement: Element, toElement: Element) {\n  const parentElement = fromElement.parentElement\n  if (parentElement) {\n    return parentElement.replaceChild(toElement, fromElement)\n  }\n}\n\nfunction elementIsFocusable(element: any): element is { focus: () => void } {\n  return element && typeof element.focus == \"function\"\n}\n","import { ErrorRenderer } from \"./error_renderer\"\nimport { Location } from \"./location\"\nimport { Snapshot } from \"./snapshot\"\nimport { SnapshotCache } from \"./snapshot_cache\"\nimport { RenderCallback, RenderDelegate, SnapshotRenderer } from \"./snapshot_renderer\"\nimport { Position } from \"./types\"\nimport { defer } from \"./util\"\n\nexport type RenderOptions = { snapshot: Snapshot, error: string, isPreview: boolean }\n\nexport type ViewDelegate = RenderDelegate & {\n  viewWillCacheSnapshot(): void\n}\n\nexport class View {\n  readonly delegate: ViewDelegate\n  readonly htmlElement = document.documentElement as HTMLHtmlElement\n  readonly snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation?: Location\n\n  constructor(delegate: ViewDelegate) {\n    this.delegate = delegate\n  }\n\n  getRootLocation(): Location {\n    return this.getSnapshot().getRootLocation()\n  }\n\n  getElementForAnchor(anchor: string) {\n    return this.getSnapshot().getElementForAnchor(anchor)\n  }\n\n  getSnapshot(): Snapshot {\n    return Snapshot.fromHTMLElement(this.htmlElement)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear()\n  }\n\n  shouldCacheSnapshot() {\n    return this.getSnapshot().isCacheable()\n  }\n\n  cacheSnapshot() {\n    if (this.shouldCacheSnapshot()) {\n      this.delegate.viewWillCacheSnapshot()\n      const snapshot = this.getSnapshot()\n      const location = this.lastRenderedLocation || Location.currentLocation\n      defer(() => this.snapshotCache.put(location, snapshot.clone()))\n    }\n  }\n\n  getCachedSnapshotForLocation(location: Location) {\n    return this.snapshotCache.get(location)\n  }\n\n  render({ snapshot, error, isPreview }: Partial<RenderOptions>, callback: RenderCallback) {\n    this.markAsPreview(isPreview)\n    if (snapshot) {\n      this.renderSnapshot(snapshot, isPreview, callback)\n    } else {\n      this.renderError(error, callback)\n    }\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor: string) {\n    const element = this.getElementForAnchor(anchor)\n    if (element) {\n      this.scrollToElement(element)\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 })\n    }\n  }\n\n  scrollToElement(element: Element) {\n    element.scrollIntoView()\n  }\n\n  scrollToPosition({ x, y }: Position) {\n    window.scrollTo(x, y)\n  }\n\n  // Private\n\n  markAsPreview(isPreview: boolean | undefined) {\n    if (isPreview) {\n      this.htmlElement.setAttribute(\"data-turbo-preview\", \"\")\n    } else {\n      this.htmlElement.removeAttribute(\"data-turbo-preview\")\n    }\n  }\n\n  renderSnapshot(snapshot: Snapshot, isPreview: boolean | undefined, callback: RenderCallback) {\n    SnapshotRenderer.render(this.delegate, callback, this.getSnapshot(), snapshot, isPreview || false)\n  }\n\n  renderError(error: string | undefined, callback: RenderCallback) {\n    ErrorRenderer.render(this.delegate, callback, error || \"\")\n  }\n}\n","import { Adapter } from \"./adapter\"\nimport { BrowserAdapter } from \"./browser_adapter\"\nimport { FormSubmitObserver } from \"./form_submit_observer\"\nimport { FrameRedirector } from \"./frame_redirector\"\nimport { History } from \"./history\"\nimport { LinkClickObserver } from \"./link_click_observer\"\nimport { Location, Locatable } from \"./location\"\nimport { Navigator, NavigatorDelegate } from \"./navigator\"\nimport { PageObserver } from \"./page_observer\"\nimport { ScrollObserver } from \"./scroll_observer\"\nimport { StreamMessage } from \"./stream_message\"\nimport { StreamObserver } from \"./stream_observer\"\nimport { Action, Position, StreamSource, isAction } from \"./types\"\nimport { closest, dispatch } from \"./util\"\nimport { View } from \"./view\"\nimport { Visit, VisitOptions } from \"./visit\"\n\nexport type TimingData = {}\n\nexport class Controller implements NavigatorDelegate {\n  adapter: Adapter = new BrowserAdapter(this)\n  readonly navigator = new Navigator(this)\n  readonly history = new History(this)\n  readonly view = new View(this)\n\n  readonly pageObserver = new PageObserver(this)\n  readonly linkClickObserver = new LinkClickObserver(this)\n  readonly formSubmitObserver = new FormSubmitObserver(this)\n  readonly scrollObserver = new ScrollObserver(this)\n  readonly streamObserver = new StreamObserver(this)\n\n  readonly frameRedirector = new FrameRedirector(document.documentElement)\n\n  enabled = true\n  progressBarDelay = 500\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start()\n      this.linkClickObserver.start()\n      this.formSubmitObserver.start()\n      this.scrollObserver.start()\n      this.streamObserver.start()\n      this.frameRedirector.start()\n      this.history.start()\n      this.started = true\n      this.enabled = true\n    }\n  }\n\n  disable() {\n    this.enabled = false\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop()\n      this.linkClickObserver.stop()\n      this.formSubmitObserver.stop()\n      this.scrollObserver.stop()\n      this.streamObserver.stop()\n      this.frameRedirector.stop()\n      this.history.stop()\n      this.started = false\n    }\n  }\n\n  registerAdapter(adapter: Adapter) {\n    this.adapter = adapter\n  }\n\n  visit(location: Locatable, options: Partial<VisitOptions> = {}) {\n    this.navigator.proposeVisit(Location.wrap(location), options)\n  }\n\n  startVisitToLocation(location: Locatable, restorationIdentifier: string, options?: Partial<VisitOptions>) {\n    this.navigator.startVisit(Location.wrap(location), restorationIdentifier, options)\n  }\n\n  connectStreamSource(source: StreamSource) {\n    this.streamObserver.connectStreamSource(source)\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    this.streamObserver.disconnectStreamSource(source)\n  }\n\n  renderStreamMessage(message: StreamMessage | string) {\n    document.documentElement.appendChild(StreamMessage.wrap(message).fragment)\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache()\n  }\n\n  setProgressBarDelay(delay: number) {\n    this.progressBarDelay = delay\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifier(location: Location) {\n    if (this.enabled) {\n      this.navigator.proposeVisit(location, { action: \"restore\", historyChanged: true })\n    } else {\n      this.adapter.pageInvalidated()\n    }\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position: Position) {\n    this.history.updateRestorationData({ scrollPosition: position })\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link: Element, location: Location) {\n    return this.linkIsVisitable(link)\n      && this.locationIsVisitable(location)\n      && this.applicationAllowsFollowingLinkToLocation(link, location)\n  }\n\n  followedLinkToLocation(link: Element, location: Location) {\n    const action = this.getActionForLink(link)\n    this.visit(location, { action })\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocation(location: Location) {\n    return this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location: Location, options: Partial<VisitOptions>) {\n    this.adapter.visitProposedToLocation(location, options)\n  }\n\n  visitStarted(visit: Visit) {\n    this.notifyApplicationAfterVisitingLocation(visit.location)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics())\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form: HTMLFormElement) {\n    return true\n  }\n\n  formSubmitted(form: HTMLFormElement) {\n    this.navigator.submitForm(form)\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location\n    this.notifyApplicationAfterPageLoad()\n  }\n\n  pageLoaded() {\n\n  }\n\n  pageInvalidated() {\n    this.adapter.pageInvalidated()\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message: StreamMessage) {\n    this.renderStreamMessage(message)\n  }\n\n  // View delegate\n\n  viewWillRender(newBody: HTMLBodyElement) {\n    this.notifyApplicationBeforeRender(newBody)\n  }\n\n  viewRendered() {\n    this.view.lastRenderedLocation = this.history.location\n    this.notifyApplicationAfterRender()\n  }\n\n  viewInvalidated() {\n    this.pageObserver.invalidate()\n  }\n\n  viewWillCacheSnapshot() {\n    this.notifyApplicationBeforeCachingSnapshot()\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link: Element, location: Location) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location)\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location: Location) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location)\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link: Element, location: Location) {\n    return dispatch(\"turbo:click\", { target: link, data: { url: location.absoluteURL }, cancelable: true })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location: Location) {\n    return dispatch(\"turbo:before-visit\", { data: { url: location.absoluteURL }, cancelable: true })\n  }\n\n  notifyApplicationAfterVisitingLocation(location: Location) {\n    return dispatch(\"turbo:visit\", { data: { url: location.absoluteURL } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody: HTMLBodyElement) {\n    return dispatch(\"turbo:before-render\", { data: { newBody }})\n  }\n\n  notifyApplicationAfterRender() {\n    return dispatch(\"turbo:render\")\n  }\n\n  notifyApplicationAfterPageLoad(timing: TimingData = {}) {\n    return dispatch(\"turbo:load\", { data: { url: this.location.absoluteURL, timing }})\n  }\n\n  // Private\n\n  getActionForLink(link: Element): Action {\n    const action = link.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n\n  linkIsVisitable(link: Element) {\n    const container = closest(link, \"[data-turbo]\")\n    if (container) {\n      return container.getAttribute(\"data-turbo\") != \"false\"\n    } else {\n      return true\n    }\n  }\n\n  locationIsVisitable(location: Location) {\n    return location.isPrefixedBy(this.view.getRootLocation()) && location.isHTML()\n  }\n}\n","import { StreamElement } from \"./elements/stream_element\"\n\nexport const StreamActions: { [action: string]: (this: StreamElement) => void } = {\n  append() {\n    this.targetElement.append(this.templateContent)\n  },\n\n  prepend() {\n    this.targetElement.prepend(this.templateContent)\n  },\n\n  replace() {\n    this.targetElement.replaceWith(this.templateContent)\n  },\n\n  update() {\n    this.targetElement.innerHTML = \"\"\n    this.targetElement.append(this.templateContent)\n  },\n\n  remove() {\n    this.targetElement.remove()\n  }\n}\n","import { StreamActions } from \"../stream_actions\"\n\n// <turbo-stream action=replace target=id><template>...\n\nexport class StreamElement extends HTMLElement {\n  connectedCallback() {\n    try {\n      this.actionFunction.call(this)\n    } catch (error) {\n      console.error(error)\n    } finally {\n      try { this.remove() } catch {}\n    }\n  }\n\n  get actionFunction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action]\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.raise(\"unknown action\")\n    }\n    this.raise(\"action attribute is missing\")\n  }\n\n  get targetElement() {\n    if (this.target) {\n      const targetElement = this.ownerDocument?.getElementById(this.target)\n      if (targetElement) {\n        return targetElement\n      }\n      this.raise(\"can't find target element\")\n    }\n    this.raise(\"target attribute is missing\")\n  }\n\n  get templateContent() {\n    return this.templateElement.content\n  }\n\n  get templateElement() {\n    if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.raise(\"first child element must be a <template> element\")\n  }\n\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  private raise(message: string): never {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  private get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n}\n\ncustomElements.define(\"turbo-stream\", StreamElement)\n","import \"./polyfills/custom-elements-native-shim\"\n\nimport { Adapter } from \"./adapter\"\nimport { Controller } from \"./controller\"\nimport { Locatable } from \"./location\"\nimport { StreamMessage } from \"./stream_message\"\nimport { StreamSource } from \"./types\"\nimport { VisitOptions } from \"./visit\"\n\nexport * from \"./adapter\"\nexport * from \"./controller\"\nexport * from \"./elements\"\nexport * from \"./fetch_request\"\nexport * from \"./fetch_response\"\nexport * from \"./form_submission\"\nexport * from \"./location\"\nexport * from \"./visit\"\n\nconst controller = new Controller\n\nconst { navigator } = controller\n\nexport { StreamSource, navigator }\n\nexport function start() {\n  controller.start()\n}\n\nexport function registerAdapter(adapter: Adapter) {\n  controller.registerAdapter(adapter)\n}\n\nexport function visit(location: Locatable, options?: Partial<VisitOptions>) {\n  controller.visit(location, options)\n}\n\nexport function connectStreamSource(source: StreamSource) {\n  controller.connectStreamSource(source)\n}\n\nexport function disconnectStreamSource(source: StreamSource) {\n  controller.disconnectStreamSource(source)\n}\n\nexport function renderStreamMessage(message: StreamMessage | string) {\n  controller.renderStreamMessage(message)\n}\n\nexport function clearCache() {\n  controller.clearCache()\n}\n\nexport function setProgressBarDelay(delay: number) {\n  controller.setProgressBarDelay(delay)\n}\n","import { unindent } from \"./util\"\n\n(() => {\n  let element: Element | null = document.currentScript\n  if (!element) return\n  if (element.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  while (element = element.parentElement) {\n    if (element == document.body) {\n      return console.warn(unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwire.dev/handbook/building#working-with-script-elements\n\n        \n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `, element.outerHTML)\n    }\n  }\n})()\n","import { start } from \"./index\"\n\nimport \"./script_warning\"\n\nexport * from \"./index\"\n\nif (!isAMD() && !isCommonJS()) {\n  start()\n}\n\ndeclare var define: (() => any) & { amd: any }\n\nfunction isAMD() {\n  return typeof define == \"function\" && define.amd\n}\n\nfunction isCommonJS() {\n  return typeof exports == \"object\" && typeof module != \"undefined\"\n}\n"],"names":["FetchMethod","TimingMetric","VisitState","SystemStatusCode","FormSubmissionState"],"mappings":"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"}